import{s as T}from"./DeTKzWR2.js";import{e as z,M as v,l as F,f as I,o as k,w as l,d as V,c as x,R as D,t as B,Z,_ as W,h as J,$ as ve,F as pe,b as n,H as ge,g as c,a as $,S as ae,J as Q,X as H,a0 as ue,k as ie,a1 as be,T as de,i as we,p as ye,E as ke,D as he,A as Ae,r as te,N as Te,C as se,a2 as Re,a3 as ne,P as Ee}from"./Dfz0Oeny.js";import{v as j,w as Le}from"./Clxg_Pcy.js";import{u as ce}from"./09NwmF32.js";import{_ as le,l as Ce}from"./UTIaXtRO.js";import{u as ee}from"./iAPasXsw.js";import{a as O,V as U}from"./B07CVZge.js";import{d as me,e as oe,u as Ie,a as _e,f as Ve,m as De}from"./P-XqHuno.js";import{b as $e,u as Be,c as Ne}from"./CdjNjyL0.js";import{u as qe}from"./Dwcg0_5Q.js";import{V as Oe,a as Se}from"./Yq0pA6_T.js";const Pe={key:0,class:"ml-1"},Me=z({__name:"AuthButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(e){const p={amazon:{icon:"fa:fas fa-brands fa-amazon",label:T.buttonLoginAmazon,name:"Amazon"},email:{icon:"mdi:mdi-email",label:T.buttonLoginEmail,name:"Email"},facebook:{icon:"fa:fa fa-brands fa-facebook",label:T.buttonLoginFaceBook,name:"FaceBook"},google:{icon:"fa:fa fa-brands fa-google",label:T.buttonLoginGoogle,name:"Google"},internal:{icon:"mdi:mdi-email",label:T.buttonLoginEmail,name:"Email"},instagram:{icon:"fa:fa fa-brands fa-instagram",label:T.buttonLoginInstagram,name:"Instagram"},keycloak:{icon:"mdi:mdi-key-variant",label:T.buttonLoginKeycloak,name:"Keycloak"},microsoft:{icon:"fa:fa fa-brands fa-windows",label:T.buttonLoginMicrosoft,name:"Microsoft"},steam:{icon:"fa:fa fa-brands fa-steam",label:T.buttonLoginSteam,name:"Steam"},telegram:{icon:"fa:fa fa-brands fa-telegram",label:T.buttonLoginTelegram,name:"Telegram"},twitch:{icon:"fa:fa fa-brands fa-twitch",label:T.buttonLoginTwitch,name:"Twitch"},twitter:{icon:"fa:fa fa-brands fa-twitter",label:T.buttonLoginTwitter,name:"Twitter"}},h=v(p[e.source.toLowerCase()].label||""),b=v(p[e.source.toLowerCase()].icon||""),u=F(()=>{var i,m;if(e.source.toLowerCase()==="internal"||e.source.toLowerCase()==="email")return(i=e.credential)==null?void 0:i.Email;try{const s=JSON.parse(((m=e.credential)==null?void 0:m.Data)||"{}");switch(e.source.toLowerCase()){case"telegram":return`@${s.username||s.id}`}}catch{}return""});return(i,m)=>(k(),I(j,{"append-icon":i.appendIcon,"prepend-icon":b.value,class:Z(`${i.source.toLowerCase()} ${e.class}`)},{default:l(()=>[V(B(h.value)+" ",1),i.showUsername&&i.credential?(k(),x("small",Pe,"("+B(u.value)+")",1)):D("",!0)]),_:1},8,["append-icon","prepend-icon","class"]))}}),fe=W(Me,[["__scopeId","data-v-053ca534"]]);var q=(e=>(e.ADD_CREDENTIAL="ADD_CREDENTIAL",e.COMBINED="COMBINED",e.LOGIN="LOGIN",e.REGISTER="REGISTER",e))(q||{});const re=async(e,p,h=!1)=>{const b=J(),{getAccessToken:u,storeAccessToken:i,storeRefreshToken:m}=ee();let s="";try{s=await u()}catch{}return await $fetch(`${b.public.issuerUri}/connect/auth/telegram`,{method:"post",body:JSON.stringify({oauth:e,access_token:s,telegram:p,new:h}),parseResponse:f=>{const a=JSON.parse(f);return a.AccessToken&&i(a.AccessToken),a.RefreshToken&&m(a.RefreshToken),{RedirectURI:a.RedirectURI||"",ErrorMessage:a.ErrorMessage||"",Existing:a.Existing||!1}}})},Ue={key:0,class:"my-2"},Fe={key:1,class:"my-2"},xe={class:"my-2"},je={class:"my-2"},Ge={class:"my-2"},ze=z({__name:"TelegramButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1}},emits:["cancel","added"],setup(e,{emit:p}){const h=p,b=J();let u=v("");b.public.telegramBotId&&(u.value=b.public.telegramBotId);const i=ce(),m=v(!1),s=v(!1),f=v(0),a=v(),E=v(),_=async()=>{if(m.value=!1,!a.value)return;const{ErrorMessage:w,Existing:y,RedirectURI:t}=await re(i,a.value,!0);y?w?(s.value=!0,f.value=1):h("added"):t&&H(t,{external:!0})},L=()=>{{if(!window.Telegram||!window.Telegram.Login||!window.Telegram.Login.auth){console.error("Telegram not initialised");return}window.Telegram.Login.auth({bot_id:u.value,request_access:!0},w=>{w||console.error("Telegram Authorization Failed"),A(w)})}},A=async w=>{const{Existing:y,RedirectURI:t}=await re(i,w,!1);if(t)try{const N=new URL(t).searchParams.get("error");N?N=="access_denied"?(m.value=!0,a.value=w):N=="invalid_request"?(s.value=!0,f.value=1):N=="server_error"&&(s.value=!0,f.value=2):H(t,{external:!0})}catch(g){console.error(g),y&&h("added")}};return ve(()=>{const w=document.createElement("script");w.async=!0,w.src="https://telegram.org/js/telegram-widget.js?22",E.value.appendChild(w)}),(w,y)=>(k(),x(Q,null,[pe(n(U,null,{default:l(()=>[n(O,{class:"text-center"},{default:l(()=>[$("div",{ref_key:"telegram",ref:E},null,512),n(fe,{"append-icon":w.appendIcon,credential:w.credential,"show-username":w.showUsername,source:"telegram",class:"d-flex justify-start w-100",onClick:L},null,8,["append-icon","credential","show-username"])]),_:1})]),_:1},512),[[ge,c(u)]]),n(le,{modelValue:c(s),"onUpdate:modelValue":y[0]||(y[0]=t=>ae(s)?s.value=t:null),"show-save-action":!1,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Error Attempting Telegram Login","hide-extension":!0,"remove-button-spacer":!0,"close-action-label":"Close",onClose:y[1]||(y[1]=t=>s.value=!1)},{default:l(()=>[c(f)===1?(k(),x("p",Ue,B(c(T).messageCreateTelegramError1),1)):D("",!0),c(f)===2?(k(),x("p",Fe,B(c(T).messageCreateTelegramError2),1)):D("",!0)]),_:1},8,["modelValue"]),n(le,{modelValue:c(m),"onUpdate:modelValue":y[2]||(y[2]=t=>ae(m)?m.value=t:null),"show-save-action":!0,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Create new account","hide-extension":!0,"save-button-label":"Create Account",onSave:_,onClose:y[3]||(y[3]=t=>h("cancel"))},{default:l(()=>[$("p",xe,B(c(T).messageCreateTelegramAccount1),1),$("p",je,B(c(T).messageCreateTelegramAccount2),1),$("p",Ge,B(c(T).messageCreateTelegramAccount3),1)]),_:1},8,["modelValue"])],64))}}),Je=z({__name:"LoginButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},credential:{},params:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(e){return(p,h)=>p.source=="telegram"?(k(),I(ze,{key:0})):(k(),I(fe,{key:1,"append-icon":p.appendIcon,credential:p.credential,"show-username":p.showUsername,source:p.source,class:"d-flex justify-start w-100"},null,8,["append-icon","credential","show-username","source"]))}}),wa=W(Je,[["__scopeId","data-v-46811731"]]),Ke={key:1,class:"ma-auto text-left"},Ze={key:2,class:"ma-auto text-left"},He={key:3,class:"ma-auto text-left"},We={class:"text-red-darken-1 font-weight-bold"},Xe={class:"text-center mt-4"},Ye=z({__name:"EmailLoginForm",props:{disabled:{type:Boolean,default:!1},requirePassword:{type:Boolean,default:!0},theme:{default:""},variant:{default:()=>q.COMBINED}},emits:["callback"],setup(e,{emit:p}){const h=v(!0);ue();const b=J(),u=p,{smAndUp:i}=ie(),m=v(!1),s=v(!1),f=v(!1),a=v(""),E=v(""),_=v(!1),L=v({passwordRequired:o=>!e.requirePassword||!!o||"Required.",required:o=>!!o||"Required.",min:o=>!e.requirePassword||o.length>=8||"Min 8 characters",email:o=>!!o.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Valid email address required"}),A=v(""),w=()=>(A.value="",!(L.value.required(a.value)!==!0||L.value.email(a.value)!==!0||L.value.passwordRequired(E.value)!==!0||L.value.min(E.value)!==!0)),y=o=>{switch(o.preventDefault(),o.submitter.value){case"add":g();break;case"create":N();break;case"forgot":M();break;case"login":default:t();break}},t=()=>{if(!w()){console.log("invalid");return}u("callback",{mode:"login",username:a.value,password:E.value})},g=(o=void 0)=>{o&&o.preventDefault(),w()&&u("callback",{mode:"add",username:a.value,password:E.value})},N=(o=void 0)=>{o&&o.preventDefault(),w()&&u("callback",{mode:"create",username:a.value,password:E.value})},M=()=>{(A.value="",!(L.value.required(a.value)!==!0||L.value.email(a.value)!==!0))&&u("callback",{mode:"link",username:a.value,password:E.value})};return(o,r)=>{const X=be("router-link");return h.value?(k(),I(me,{key:0,onSubmit:de(y,["stop"]),disabled:o.disabled,id:"login-form",action:`${c(b).public.issuerUri}/connect/auth/internal`,method:"post",class:Z(`pa-4 rounded rounded-l ${o.theme?`theme-${o.theme}`:""}`)},{default:l(()=>[n(U,null,{default:l(()=>[n(O,null,{default:l(()=>[n(oe,{margin:"normal",required:"",id:"username",label:"Email Address",name:"username",autocomplete:"username",autofocus:"",variant:"outlined",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=G=>a.value=G),rules:[L.value.required,L.value.email],clearable:!0},null,8,["modelValue","rules"])]),_:1})]),_:1}),o.requirePassword?(k(),I(U,{key:0},{default:l(()=>[n(O,null,{default:l(()=>[n(oe,{margin:"normal",required:"",name:"password",label:"Password",type:_.value?"text":"password",id:"password",autocomplete:"current-password",variant:"outlined",modelValue:E.value,"onUpdate:modelValue":r[1]||(r[1]=G=>E.value=G),"append-inner-icon":_.value?"mdi:mdi-eye-off":"mdi:mdi-eye","onClick:appendInner":r[2]||(r[2]=G=>_.value=!_.value),counter:"",hint:"At least 8 characters",rules:[L.value.required,L.value.min],clearable:!1},null,8,["type","modelValue","append-inner-icon","rules"])]),_:1})]),_:1})):D("",!0),A.value?(k(),I(U,{key:1},{default:l(()=>[n(O,{class:"text-red-darken-1 font-weight-bold"},{default:l(()=>[V(B(A.value),1)]),_:1})]),_:1})):D("",!0),n(U,{justify:"space-between"},{default:l(()=>[o.variant===c(q).COMBINED||o.variant===c(q).REGISTER?(k(),I(O,{key:0,cols:"12",sm:"7",order:"2","order-sm":"1",class:Z(`${c(i)?"":"text-center"}`)},{default:l(()=>[n(j,{color:"orange-darken-2",disabled:o.disabled,type:o.variant===c(q).COMBINED?"button":"submit",class:"w-100","prepend-icon":"mdi:mdi-account-edit",onClick:N,value:"create"},{default:l(()=>r[3]||(r[3]=[V(" Create Account ")])),_:1},8,["disabled","type"])]),_:1},8,["class"])):D("",!0),o.variant===c(q).COMBINED||o.variant===c(q).LOGIN?(k(),I(O,{key:1,cols:"12",sm:"5",order:"1","order-sm":"2",class:Z(`${c(i)?"text-right":"text-center"}`)},{default:l(()=>[n(j,{color:"success",disabled:o.disabled,type:"submit",class:"w-100","prepend-icon":"mdi:mdi-login",value:"login"},{default:l(()=>r[4]||(r[4]=[V(" Sign In ")])),_:1},8,["disabled"])]),_:1},8,["class"])):D("",!0),o.variant===c(q).ADD_CREDENTIAL?(k(),I(O,{key:2,cols:"12",class:"flex-grow-0 text-right"},{default:l(()=>[n(j,{color:"success",disabled:o.disabled,type:"submit",value:"add"},{default:l(()=>r[5]||(r[5]=[V(" Add Email ")])),_:1},8,["disabled"])]),_:1})):D("",!0)]),_:1}),o.variant===c(q).COMBINED||o.variant===c(q).LOGIN?(k(),I(U,{key:2},{default:l(()=>[n(O,null,{default:l(()=>[n(j,{type:"submit",class:"w-100",color:"grey",disabled:o.disabled,"prepend-icon":"mdi:mdi-account-question",value:"forgot"},{default:l(()=>[V(B(c(T).buttonForgottenPassword),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):D("",!0)]),_:1},8,["disabled","action","class"])):m.value?(k(),x("p",Ke,B(c(T).messageResetEmail),1)):s.value?(k(),x("p",Ze,B(c(T).messageVerifyNewAccountEmail),1)):f.value?(k(),x("p",He,[V(B(c(T).messageVerifiedNewAccountMessage)+" ",1),A.value?(k(),x(Q,{key:0},[r[9]||(r[9]=$("br",null,null,-1)),r[10]||(r[10]=$("br",null,null,-1)),$("span",We,[r[6]||(r[6]=V(" An error occurred creating or recovering account:")),r[7]||(r[7]=$("br",null,null,-1)),V(" "+B(A.value),1)]),r[11]||(r[11]=$("br",null,null,-1)),r[12]||(r[12]=$("br",null,null,-1)),r[13]||(r[13]=$("span",{class:"text-red-darken-4"}," Please contact registration if you require further assistance. ",-1)),$("div",Xe,[n(X,{to:"/"},{default:l(()=>[n(j,{color:"red"},{default:l(()=>r[8]||(r[8]=[V("Close")])),_:1})]),_:1})])],64)):D("",!0)])):D("",!0)}}}),Qe=W(Ye,[["__scopeId","data-v-8b72eb5c"]]),ea=ye({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Ne(),...Ve(),...Re(De({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),aa=we()({name:"VOtpInput",props:ea(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,p){let{attrs:h,emit:b,slots:u}=p;const{dimensionStyles:i}=$e(e),{isFocused:m,focus:s,blur:f}=Ie(e),a=ke(e,"modelValue","",d=>d==null?[]:String(d).split(""),d=>d.join("")),{t:E}=he(),_=F(()=>Number(e.length)),L=F(()=>Array(_.value).fill(0)),A=v(-1),w=v(),y=v([]),t=F(()=>y.value[A.value]);function g(){if(G(t.value.value)){t.value.value="";return}const d=a.value.slice(),R=t.value.value;d[A.value]=R;let S=null;A.value>a.value.length?S=a.value.length+1:A.value+1!==_.value&&(S="next"),a.value=d,S&&ne(w.value,S)}function N(d){const R=a.value.slice(),S=A.value;let P=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(d.key)&&(d.preventDefault(),d.key==="ArrowLeft"?P="prev":d.key==="ArrowRight"?P="next":["Backspace","Delete"].includes(d.key)&&(R[A.value]="",a.value=R,A.value>0&&d.key==="Backspace"?P="prev":requestAnimationFrame(()=>{var C;(C=y.value[S])==null||C.select()})),requestAnimationFrame(()=>{P!=null&&ne(w.value,P)}))}function M(d,R){var P,C;R.preventDefault(),R.stopPropagation();const S=((P=R==null?void 0:R.clipboardData)==null?void 0:P.getData("Text").slice(0,_.value))??"";G(S)||(a.value=S.split(""),(C=y.value)==null||C[d].blur())}function o(){a.value=[]}function r(d,R){s(),A.value=R}function X(){f(),A.value=-1}function G(d){return e.type==="number"&&/[^0-9]/g.test(d)}return Ae({VField:{color:F(()=>e.color),bgColor:F(()=>e.color),baseColor:F(()=>e.baseColor),disabled:F(()=>e.disabled),error:F(()=>e.error),variant:F(()=>e.variant)}},{scoped:!0}),te(a,d=>{d.length===_.value&&b("finish",d.join(""))},{deep:!0}),te(A,d=>{d<0||Ee(()=>{var R;(R=y.value[d])==null||R.select()})}),Be(()=>{var S;const[d,R]=Te(h);return n("div",se({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},d),[n("div",{ref:w,class:"v-otp-input__content",style:[i.value]},[L.value.map((P,C)=>n(Q,null,[e.divider&&C!==0&&n("span",{class:"v-otp-input__divider"},[e.divider]),n(_e,{focused:m.value&&e.focusAll||A.value===C,key:C},{...u,loader:void 0,default:()=>n("input",{ref:K=>y.value[C]=K,"aria-label":E(e.label,C+1),autofocus:C===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:C===0?_.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:a.value[C],onInput:g,onFocus:K=>r(K,C),onBlur:X,onKeydown:N,onPaste:K=>M(C,K)},null)})])),n("input",se({class:"v-otp-input-input",type:"hidden"},R,{value:a.value.join("")}),null),n(Ce,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var P;return[((P=u.loader)==null?void 0:P.call(u))??n(Le,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(S=u.default)==null?void 0:S.call(u)])])}),{blur:()=>{var d;(d=y.value)==null||d.some(R=>R.blur())},focus:()=>{var d;(d=y.value)==null||d[0].focus()},reset:o,isFocused:m}}}),ta=z({__name:"OTPLoginForm",props:{email:{},disabled:{type:Boolean,default:!1},theme:{}},emits:["callback"],setup(e,{emit:p}){v(!0),ue();const h=p;ie();const b=v(""),u=v({required:s=>!!s||"Required.",min:s=>s.length>=6||"Min 6 characters"}),i=v(""),m=s=>{s.preventDefault(),(i.value="",!(u.value.required(b.value)!==!0||u.value.min(b.value)!==!0))&&h("callback",{mode:"validate",username:e.email,password:b.value})};return(s,f)=>(k(),I(me,{onSubmit:de(m,["stop"]),disabled:s.disabled,class:Z(`${s.theme?`theme-${s.theme}`:""}`)},{default:l(()=>[f[2]||(f[2]=$("h3",{class:"text-h6 mb-2"}," Please enter the one time password to verify your account ",-1)),$("p",null,"A code has been sent to "+B(s.email),1),n(U,null,{default:l(()=>[n(O,null,{default:l(()=>[n(aa,{disabled:s.disabled,length:"6",modelValue:b.value,"onUpdate:modelValue":f[0]||(f[0]=a=>b.value=a),rules:[u.value.required,u.value.min]},null,8,["disabled","modelValue","rules"])]),_:1})]),_:1}),n(U,null,{default:l(()=>[n(O,null,{default:l(()=>[n(j,{disabled:b.value.length!=6,type:"submit",color:"primary",variant:"flat",class:"w-100"},{default:l(()=>f[1]||(f[1]=[V(" Validate ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","class"]))}}),sa=W(ta,[["__scopeId","data-v-cef8d496"]]),na=async(e,p,h=!1)=>{const b=J(),{getAccessToken:u,storeAccessToken:i,storeRefreshToken:m}=ee();let s="";try{s=await u()}catch{}return await $fetch(`${b.public.issuerUri}/connect/auth/internal`,{method:"post",body:JSON.stringify({oauth:e,access_token:s,internal:{username:p.username,password:p.password},new:h}),parseResponse:f=>{const a=JSON.parse(f);return a.AccessToken&&i(a.AccessToken),a.RefreshToken&&m(a.RefreshToken),{ErrorMessage:a.ErrorMessage||"",RedirectURI:a.RedirectURI||"",Existing:a.Existing||!1}}})},Y=async(e,p,h="",b=!1)=>{const u=J();return await $fetch(`${u.public.issuerUri}/connect/email/link`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:p,password:h},new:b})})},la=async(e,p,h=!1)=>{const b=J(),{storeAccessToken:u,storeRefreshToken:i}=ee();return await $fetch(`${b.public.issuerUri}/connect/auth/otp`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:p.username,password:p.password},new:h}),parseResponse:m=>{const s=JSON.parse(m);return s.AccessToken&&u(s.AccessToken),s.RefreshToken&&i(s.RefreshToken),{RedirectURI:s.RedirectURI||"",ErrorMessage:s.ErrorMessage||"",Existing:s.Existing||""}}})},oa={class:"ma-auto",style:{"max-width":"450px"}},ya=z({__name:"email",props:{mode:{default:"view"},requirePassword:{type:Boolean,default:!0},theme:{default:"shaded"},variant:{default:()=>q.COMBINED}},emits:["cancel","added"],setup(e,{emit:p}){const h=p,b=qe(),u=v(""),i=v("email"),m=v(!1),s=ce(),f=v(!1),a=v(),E=t=>{switch(t.mode.toLocaleString()){case"add":return _(t);case"create":return L(t);case"link":return A(t.username);case"login":return y(t);case"register":return;case"validate":return w(t)}},_=async t=>{f.value=!1;const{token:g}=await Y(s,t.username,t.password,!0);u.value=t.username,a.value=g,i.value="otp_validate"},L=async t=>{f.value=!1;const{token:g}=await Y(s,t.username,t.password,!0);u.value=t.username,a.value=g,i.value="otp_create"},A=async t=>{f.value=!1;const{token:g}=await Y(s,t);u.value=t,a.value=g,i.value="otp_validate"},w=async t=>{m.value=!0;const{ErrorMessage:g,Existing:N,RedirectURI:M}=await la(s,{username:t.username,password:`${a.value}:${t.password}`},i.value=="otp_create");if(e.variant!==q.ADD_CREDENTIAL&&M)try{const r=new URL(M).searchParams.get("error");if((r==null?void 0:r.toLowerCase())!="invalid_request"&&(r==null?void 0:r.toLowerCase())!="access_denied"){H(M,{external:!0});return}}catch{}else if(e.variant===q.ADD_CREDENTIAL&&N&&!g){f.value=!1,m.value=!1,i.value="",h("added");return}f.value=!0,m.value=!1,i.value="email"},y=async t=>{m.value=!0,f.value=!1;const{RedirectURI:g}=await na(s,t);if(g){const M=new URL(g).searchParams.get("error");if((M==null?void 0:M.toLowerCase())=="invalid_request"){f.value=!0,m.value=!1;return}H(g,{external:!0})}};return(t,g)=>(k(),x("div",oa,[c(f)?(k(),I(U,{key:0},{default:l(()=>[n(O,null,{default:l(()=>[n(Oe,{type:"error"},{default:l(()=>[n(Se,null,{default:l(()=>g[1]||(g[1]=[V("Login Failed")])),_:1}),g[2]||(g[2]=V(" There was problem with your login attempt. It may be the account doesn't exist or your password was incorrect. You may have also created your account using a Telegram login instead. "))]),_:1})]),_:1})]),_:1})):D("",!0),n(U,null,{default:l(()=>[n(O,null,{default:l(()=>[c(i)=="email"?(k(),I(Qe,{key:0,disabled:c(m),"redirect-url":c(b).href,variant:t.variant,theme:t.theme,requirePassword:t.requirePassword,onCallback:E},null,8,["disabled","redirect-url","variant","theme","requirePassword"])):c(i)=="otp_create"||c(i)=="otp_validate"?(k(),I(sa,{key:1,disabled:c(m),email:c(u),theme:t.theme,onCallback:E},null,8,["disabled","email","theme"])):D("",!0)]),_:1})]),_:1}),t.mode=="view"?(k(),I(U,{key:1},{default:l(()=>[n(O,{class:"text-left"},{default:l(()=>[n(j,{color:"error",onClick:g[0]||(g[0]=N=>h("cancel")),class:"w-100","prepend-icon":"mdi:mdi-arrow-left-circle"},{default:l(()=>g[3]||(g[3]=[V(" Go Back ")])),_:1})]),_:1})]),_:1})):D("",!0)]))}});export{fe as A,q as E,wa as L,ya as _};
