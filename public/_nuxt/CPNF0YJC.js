import{e as J,r as p,ad as ue,P as ie,A as ve,f as I,c as x,k as D,o as k,ae as Z,g as c,ab as de,h as z,w as l,b as n,d as V,t as N,F as Q,a as B,_ as X,L as pe,K as ge,a0 as be,$ as we,D as F,X as ye,l as ae,a7 as he,Z as te,af as ke,ag as se,a8 as Re,n as W,q as Ae,a1 as Te,a3 as Le,aa as ne}from"./3s1sx6wo.js";import{s as A}from"./DVVigWha.js";import{d as ce,e as le,u as Ee,a as Ce,f as Ie,m as _e}from"./B6dmUYqY.js";import{V as M,a as q}from"./BJXrktLP.js";import{V as j,w as Ve}from"./C9R-QpZI.js";import{l as $e,_ as re}from"./DM8KnH0J.js";import{b as De,u as Be,c as Ne}from"./D6KsYbGk.js";import{u as Oe}from"./Dwcg0_5Q.js";import{u as me}from"./BwDrwrI2.js";import{u as ee}from"./CVQlkizh.js";import{V as qe,a as Se}from"./CjPOQAt6.js";var $=(e=>(e.ADD_CREDENTIAL="ADD_CREDENTIAL",e.COMBINED="COMBINED",e.LOGIN="LOGIN",e.REGISTER="REGISTER",e))($||{});const Pe={key:1,class:"ma-auto text-left"},Ue={key:2,class:"ma-auto text-left"},Me={key:3,class:"ma-auto text-left"},Fe={class:"text-red-darken-1 font-weight-bold"},xe={class:"text-center mt-4"},je=J({__name:"EmailLoginForm",props:{disabled:{type:Boolean,default:!1},requirePassword:{type:Boolean,default:!0},theme:{default:""},variant:{default:()=>$.COMBINED}},emits:["callback"],setup(e,{emit:m}){const g=p(!0);ue();const b=z(),r=m,{smAndUp:i}=ie(),f=p(!1),t=p(!1),v=p(!1),a=p(""),L=p(""),_=p(!1),E=p({passwordRequired:o=>!e.requirePassword||!!o||"Required.",required:o=>!!o||"Required.",min:o=>!e.requirePassword||o.length>=8||"Min 8 characters",email:o=>!!o.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Valid email address required"}),R=p(""),y=()=>(R.value="",!(E.value.required(a.value)!==!0||E.value.email(a.value)!==!0||E.value.passwordRequired(L.value)!==!0||E.value.min(L.value)!==!0)),h=o=>{switch(o.preventDefault(),o.submitter.value){case"add":w();break;case"create":O();break;case"forgot":U();break;case"login":default:s();break}},s=()=>{if(!y()){console.log("invalid");return}r("callback",{mode:"login",username:a.value,password:L.value})},w=(o=void 0)=>{o&&o.preventDefault(),y()&&r("callback",{mode:"add",username:a.value,password:L.value})},O=(o=void 0)=>{o&&o.preventDefault(),y()&&r("callback",{mode:"create",username:a.value,password:L.value})},U=()=>{(R.value="",!(E.value.required(a.value)!==!0||E.value.email(a.value)!==!0))&&r("callback",{mode:"link",username:a.value,password:L.value})};return(o,u)=>{const Y=ve("router-link");return g.value?(k(),I(ce,{key:0,onSubmit:de(h,["stop"]),disabled:o.disabled,id:"login-form",action:`${c(b).public.issuerUri}/connect/auth/internal`,method:"post",class:Z(`pa-4 rounded rounded-l ${o.theme?`theme-${o.theme}`:""}`)},{default:l(()=>[n(M,null,{default:l(()=>[n(q,null,{default:l(()=>[n(le,{margin:"normal",required:"",id:"username",label:"Email Address",name:"username",autocomplete:"username",autofocus:"",variant:"outlined",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=G=>a.value=G),rules:[E.value.required,E.value.email],clearable:!0},null,8,["modelValue","rules"])]),_:1})]),_:1}),o.requirePassword?(k(),I(M,{key:0},{default:l(()=>[n(q,null,{default:l(()=>[n(le,{margin:"normal",required:"",name:"password",label:"Password",type:_.value?"text":"password",id:"password",autocomplete:"current-password",variant:"outlined",modelValue:L.value,"onUpdate:modelValue":u[1]||(u[1]=G=>L.value=G),"append-inner-icon":_.value?"mdi:mdi-eye-off":"mdi:mdi-eye","onClick:appendInner":u[2]||(u[2]=G=>_.value=!_.value),counter:"",hint:"At least 8 characters",rules:[E.value.required,E.value.min],clearable:!1},null,8,["type","modelValue","append-inner-icon","rules"])]),_:1})]),_:1})):D("",!0),R.value?(k(),I(M,{key:1},{default:l(()=>[n(q,{class:"text-red-darken-1 font-weight-bold"},{default:l(()=>[V(N(R.value),1)]),_:1})]),_:1})):D("",!0),n(M,{justify:"space-between"},{default:l(()=>[o.variant===c($).COMBINED||o.variant===c($).REGISTER?(k(),I(q,{key:0,cols:"12",sm:"7",order:"2","order-sm":"1",class:Z(`${c(i)?"":"text-center"}`)},{default:l(()=>[n(j,{color:"orange-darken-2",disabled:o.disabled,type:o.variant===c($).COMBINED?"button":"submit",class:"w-100","prepend-icon":"mdi:mdi-account-edit",onClick:O,value:"create"},{default:l(()=>u[3]||(u[3]=[V(" Create Account ")])),_:1},8,["disabled","type"])]),_:1},8,["class"])):D("",!0),o.variant===c($).COMBINED||o.variant===c($).LOGIN?(k(),I(q,{key:1,cols:"12",sm:"5",order:"1","order-sm":"2",class:Z(`${c(i)?"text-right":"text-center"}`)},{default:l(()=>[n(j,{color:"success",disabled:o.disabled,type:"submit",class:"w-100","prepend-icon":"mdi:mdi-login",value:"login"},{default:l(()=>u[4]||(u[4]=[V(" Sign In ")])),_:1},8,["disabled"])]),_:1},8,["class"])):D("",!0),o.variant===c($).ADD_CREDENTIAL?(k(),I(q,{key:2,cols:"12",class:"flex-grow-0 text-right"},{default:l(()=>[n(j,{color:"success",disabled:o.disabled,type:"submit",value:"add"},{default:l(()=>u[5]||(u[5]=[V(" Add Email ")])),_:1},8,["disabled"])]),_:1})):D("",!0)]),_:1}),o.variant===c($).COMBINED||o.variant===c($).LOGIN?(k(),I(M,{key:2},{default:l(()=>[n(q,null,{default:l(()=>[n(j,{type:"submit",class:"w-100",color:"grey",disabled:o.disabled,"prepend-icon":"mdi:mdi-account-question",value:"forgot"},{default:l(()=>[V(N(c(A).buttonForgottenPassword),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):D("",!0)]),_:1},8,["disabled","action","class"])):f.value?(k(),x("p",Pe,N(c(A).messageResetEmail),1)):t.value?(k(),x("p",Ue,N(c(A).messageVerifyNewAccountEmail),1)):v.value?(k(),x("p",Me,[V(N(c(A).messageVerifiedNewAccountMessage)+" ",1),R.value?(k(),x(Q,{key:0},[u[9]||(u[9]=B("br",null,null,-1)),u[10]||(u[10]=B("br",null,null,-1)),B("span",Fe,[u[6]||(u[6]=V(" An error occurred creating or recovering account:")),u[7]||(u[7]=B("br",null,null,-1)),V(" "+N(R.value),1)]),u[11]||(u[11]=B("br",null,null,-1)),u[12]||(u[12]=B("br",null,null,-1)),u[13]||(u[13]=B("span",{class:"text-red-darken-4"}," Please contact registration if you require further assistance. ",-1)),B("div",xe,[n(Y,{to:"/"},{default:l(()=>[n(j,{color:"red"},{default:l(()=>u[8]||(u[8]=[V("Close")])),_:1})]),_:1})])],64)):D("",!0)])):D("",!0)}}}),Ge=X(je,[["__scopeId","data-v-8b72eb5c"]]),ze=ge({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Ne(),...Ie(),...ke(_e({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Je=pe()({name:"VOtpInput",props:ze(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:g,emit:b,slots:r}=m;const{dimensionStyles:i}=De(e),{isFocused:f,focus:t,blur:v}=Ee(e),a=be(e,"modelValue","",d=>d==null?[]:String(d).split(""),d=>d.join("")),{t:L}=we(),_=F(()=>Number(e.length)),E=F(()=>Array(_.value).fill(0)),R=p(-1),y=p(),h=p([]),s=F(()=>h.value[R.value]);function w(){if(G(s.value.value)){s.value.value="";return}const d=a.value.slice(),T=s.value.value;d[R.value]=T;let S=null;R.value>a.value.length?S=a.value.length+1:R.value+1!==_.value&&(S="next"),a.value=d,S&&se(y.value,S)}function O(d){const T=a.value.slice(),S=R.value;let P=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(d.key)&&(d.preventDefault(),d.key==="ArrowLeft"?P="prev":d.key==="ArrowRight"?P="next":["Backspace","Delete"].includes(d.key)&&(T[R.value]="",a.value=T,R.value>0&&d.key==="Backspace"?P="prev":requestAnimationFrame(()=>{var C;(C=h.value[S])==null||C.select()})),requestAnimationFrame(()=>{P!=null&&se(y.value,P)}))}function U(d,T){var P,C;T.preventDefault(),T.stopPropagation();const S=((P=T==null?void 0:T.clipboardData)==null?void 0:P.getData("Text").slice(0,_.value))??"";G(S)||(a.value=S.split(""),(C=h.value)==null||C[d].blur())}function o(){a.value=[]}function u(d,T){t(),R.value=T}function Y(){v(),R.value=-1}function G(d){return e.type==="number"&&/[^0-9]/g.test(d)}return ye({VField:{color:F(()=>e.color),bgColor:F(()=>e.color),baseColor:F(()=>e.baseColor),disabled:F(()=>e.disabled),error:F(()=>e.error),variant:F(()=>e.variant)}},{scoped:!0}),ae(a,d=>{d.length===_.value&&b("finish",d.join(""))},{deep:!0}),ae(R,d=>{d<0||Re(()=>{var T;(T=h.value[d])==null||T.select()})}),Be(()=>{var S;const[d,T]=he(g);return n("div",te({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},d),[n("div",{ref:y,class:"v-otp-input__content",style:[i.value]},[E.value.map((P,C)=>n(Q,null,[e.divider&&C!==0&&n("span",{class:"v-otp-input__divider"},[e.divider]),n(Ce,{focused:f.value&&e.focusAll||R.value===C,key:C},{...r,loader:void 0,default:()=>n("input",{ref:K=>h.value[C]=K,"aria-label":L(e.label,C+1),autofocus:C===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:C===0?_.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:a.value[C],onInput:w,onFocus:K=>u(K,C),onBlur:Y,onKeydown:O,onPaste:K=>U(C,K)},null)})])),n("input",te({class:"v-otp-input-input",type:"hidden"},T,{value:a.value.join("")}),null),n($e,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var P;return[((P=r.loader)==null?void 0:P.call(r))??n(Ve,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(S=r.default)==null?void 0:S.call(r)])])}),{blur:()=>{var d;(d=h.value)==null||d.some(T=>T.blur())},focus:()=>{var d;(d=h.value)==null||d[0].focus()},reset:o,isFocused:f}}}),Ke=J({__name:"OTPLoginForm",props:{email:{},disabled:{type:Boolean,default:!1},theme:{}},emits:["callback"],setup(e,{emit:m}){p(!0),ue();const g=m;ie();const b=p(""),r=p({required:t=>!!t||"Required.",min:t=>t.length>=6||"Min 6 characters"}),i=p(""),f=t=>{t.preventDefault(),(i.value="",!(r.value.required(b.value)!==!0||r.value.min(b.value)!==!0))&&g("callback",{mode:"validate",username:e.email,password:b.value})};return(t,v)=>(k(),I(ce,{onSubmit:de(f,["stop"]),disabled:t.disabled,class:Z(`${t.theme?`theme-${t.theme}`:""}`)},{default:l(()=>[v[2]||(v[2]=B("h3",{class:"text-h6 mb-2"}," Please enter the one time password to verify your account ",-1)),B("p",null,"A code has been sent to "+N(t.email),1),n(M,null,{default:l(()=>[n(q,null,{default:l(()=>[n(Je,{disabled:t.disabled,length:"6",modelValue:b.value,"onUpdate:modelValue":v[0]||(v[0]=a=>b.value=a),rules:[r.value.required,r.value.min]},null,8,["disabled","modelValue","rules"])]),_:1})]),_:1}),n(M,null,{default:l(()=>[n(q,null,{default:l(()=>[n(j,{disabled:b.value.length!=6,type:"submit",color:"primary",variant:"flat",class:"w-100"},{default:l(()=>v[1]||(v[1]=[V(" Validate ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","class"]))}}),Ze=X(Ke,[["__scopeId","data-v-cef8d496"]]),We=async(e,m,g=!1)=>{const b=z(),{getAccessToken:r,storeAccessToken:i,storeRefreshToken:f}=ee();let t="";try{t=await r()}catch{}return await $fetch(`${b.public.issuerUri}/connect/auth/internal`,{method:"post",body:JSON.stringify({oauth:e,access_token:t,internal:{username:m.username,password:m.password},new:g}),parseResponse:v=>{const a=JSON.parse(v);return a.AccessToken&&i(a.AccessToken),a.RefreshToken&&f(a.RefreshToken),{ErrorMessage:a.ErrorMessage||"",RedirectURI:a.RedirectURI||"",Existing:a.Existing||!1}}})},H=async(e,m,g="",b=!1)=>{const r=z();return await $fetch(`${r.public.issuerUri}/connect/email/link`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:m,password:g},new:b})})},Xe=async(e,m,g=!1)=>{const b=z(),{storeAccessToken:r,storeRefreshToken:i}=ee();return await $fetch(`${b.public.issuerUri}/connect/auth/otp`,{method:"post",body:JSON.stringify({oauth:e,internal:{username:m.username,password:m.password},new:g}),parseResponse:f=>{const t=JSON.parse(f);return t.AccessToken&&r(t.AccessToken),t.RefreshToken&&i(t.RefreshToken),{RedirectURI:t.RedirectURI||"",ErrorMessage:t.ErrorMessage||"",Existing:t.Existing||""}}})},Ye={class:"ma-auto",style:{"max-width":"450px"}},wa=J({__name:"email",props:{mode:{default:"view"},requirePassword:{type:Boolean,default:!0},theme:{default:"shaded"},variant:{default:()=>$.COMBINED}},emits:["cancel","added"],setup(e,{emit:m}){const g=m,b=Oe(),r=p(""),i=p("email"),f=p(!1),t=me(),v=p(!1),a=p(),L=s=>{switch(s.mode.toLocaleString()){case"add":return _(s);case"create":return E(s);case"link":return R(s.username);case"login":return h(s);case"register":return;case"validate":return y(s)}},_=async s=>{v.value=!1;const{token:w}=await H(t,s.username,s.password,!0);r.value=s.username,a.value=w,i.value="otp_validate"},E=async s=>{v.value=!1;const{token:w}=await H(t,s.username,s.password,!0);r.value=s.username,a.value=w,i.value="otp_create"},R=async s=>{v.value=!1;const{token:w}=await H(t,s);r.value=s,a.value=w,i.value="otp_validate"},y=async s=>{f.value=!0;const{ErrorMessage:w,Existing:O,RedirectURI:U}=await Xe(t,{username:s.username,password:`${a.value}:${s.password}`},i.value=="otp_create");if(e.variant!==$.ADD_CREDENTIAL&&U)try{const u=new URL(U).searchParams.get("error");if((u==null?void 0:u.toLowerCase())!="invalid_request"&&(u==null?void 0:u.toLowerCase())!="access_denied"){W(U,{external:!0});return}}catch{}else if(e.variant===$.ADD_CREDENTIAL&&O&&!w){v.value=!1,f.value=!1,i.value="",g("added");return}v.value=!0,f.value=!1,i.value="email"},h=async s=>{f.value=!0,v.value=!1;const{RedirectURI:w}=await We(t,s);if(w){const U=new URL(w).searchParams.get("error");if((U==null?void 0:U.toLowerCase())=="invalid_request"){v.value=!0,f.value=!1;return}W(w,{external:!0})}};return(s,w)=>(k(),x("div",Ye,[c(v)?(k(),I(M,{key:0},{default:l(()=>[n(q,null,{default:l(()=>[n(qe,{type:"error"},{default:l(()=>[n(Se,null,{default:l(()=>w[1]||(w[1]=[V("Login Failed")])),_:1}),w[2]||(w[2]=V(" There was problem with your login attempt. It may be the account doesn't exist or your password was incorrect. You may have also created your account using a Telegram login instead. "))]),_:1})]),_:1})]),_:1})):D("",!0),n(M,null,{default:l(()=>[n(q,null,{default:l(()=>[c(i)=="email"?(k(),I(Ge,{key:0,disabled:c(f),"redirect-url":c(b).href,variant:s.variant,theme:s.theme,requirePassword:s.requirePassword,onCallback:L},null,8,["disabled","redirect-url","variant","theme","requirePassword"])):c(i)=="otp_create"||c(i)=="otp_validate"?(k(),I(Ze,{key:1,disabled:c(f),email:c(r),theme:s.theme,onCallback:L},null,8,["disabled","email","theme"])):D("",!0)]),_:1})]),_:1}),s.mode=="view"?(k(),I(M,{key:1},{default:l(()=>[n(q,{class:"text-left"},{default:l(()=>[n(j,{color:"error",onClick:w[0]||(w[0]=O=>g("cancel")),class:"w-100","prepend-icon":"mdi:mdi-arrow-left-circle"},{default:l(()=>w[3]||(w[3]=[V(" Go Back ")])),_:1})]),_:1})]),_:1})):D("",!0)]))}}),He={key:0,class:"ml-1"},Qe=J({__name:"AuthButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1},source:{default:"internal"}},setup(e){const m={amazon:{icon:"fa:fas fa-brands fa-amazon",label:A.buttonLoginAmazon,name:"Amazon"},email:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},facebook:{icon:"fa:fa fa-brands fa-facebook",label:A.buttonLoginFaceBook,name:"FaceBook"},google:{icon:"fa:fa fa-brands fa-google",label:A.buttonLoginGoogle,name:"Google"},internal:{icon:"mdi:mdi-email",label:A.buttonLoginEmail,name:"Email"},instagram:{icon:"fa:fa fa-brands fa-instagram",label:A.buttonLoginInstagram,name:"Instagram"},keycloak:{icon:"mdi:mdi-key-variant",label:A.buttonLoginKeycloak,name:"Keycloak"},microsoft:{icon:"fa:fa fa-brands fa-windows",label:A.buttonLoginMicrosoft,name:"Microsoft"},steam:{icon:"fa:fa fa-brands fa-steam",label:A.buttonLoginSteam,name:"Steam"},telegram:{icon:"fa:fa fa-brands fa-telegram",label:A.buttonLoginTelegram,name:"Telegram"},twitch:{icon:"fa:fa fa-brands fa-twitch",label:A.buttonLoginTwitch,name:"Twitch"},twitter:{icon:"fa:fa fa-brands fa-twitter",label:A.buttonLoginTwitter,name:"Twitter"}},g=p(m[e.source.toLowerCase()].label||""),b=p(m[e.source.toLowerCase()].icon||""),r=F(()=>{var i,f;if(e.source.toLowerCase()==="internal"||e.source.toLowerCase()==="email")return(i=e.credential)==null?void 0:i.Email;try{const t=JSON.parse(((f=e.credential)==null?void 0:f.Data)||"{}");switch(e.source.toLowerCase()){case"telegram":return`@${t.username||t.id}`;case"keycloak":return`${t.preferred_username}`}}catch{}return""});return(i,f)=>(k(),I(j,{"append-icon":i.appendIcon,"prepend-icon":b.value,class:Z(`${i.source.toLowerCase()} ${e.class}`)},{default:l(()=>[V(N(g.value)+" ",1),i.showUsername&&i.credential?(k(),x("small",He,"("+N(r.value)+")",1)):D("",!0)]),_:1},8,["append-icon","prepend-icon","class"]))}}),fe=X(Qe,[["__scopeId","data-v-1c6ce024"]]),oe=async(e,m,g=!1)=>{const b=z(),{getAccessToken:r,storeAccessToken:i,storeRefreshToken:f}=ee();let t="";try{t=await r()}catch{}return await $fetch(`${b.public.issuerUri}/connect/auth/telegram`,{method:"post",body:JSON.stringify({oauth:e,access_token:t,telegram:m,new:g}),parseResponse:v=>{const a=JSON.parse(v);return a.AccessToken&&i(a.AccessToken),a.RefreshToken&&f(a.RefreshToken),{RedirectURI:a.RedirectURI||"",ErrorMessage:a.ErrorMessage||"",Existing:a.Existing||!1}}})},ea={key:0,class:"my-2"},aa={key:1,class:"my-2"},ta={class:"my-2"},sa={class:"my-2"},na={class:"my-2"},la=J({__name:"TelegramButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},class:{default:""},credential:{},showUsername:{type:Boolean,default:!1}},emits:["cancel","added"],setup(e,{emit:m}){const g=m,b=z();let r=p("");b.public.telegramBotId&&(r.value=b.public.telegramBotId);const i=me(),f=p(!1),t=p(!1),v=p(0),a=p(),L=p(),_=async()=>{if(f.value=!1,!a.value)return;const{ErrorMessage:y,Existing:h,RedirectURI:s}=await oe(i,a.value,!0);h?y?(t.value=!0,v.value=1):g("added"):s&&W(s,{external:!0})},E=()=>{{if(!window.Telegram||!window.Telegram.Login||!window.Telegram.Login.auth){console.error("Telegram not initialised");return}window.Telegram.Login.auth({bot_id:r.value,request_access:!0},y=>{y||console.error("Telegram Authorization Failed"),R(y)})}},R=async y=>{const{Existing:h,RedirectURI:s}=await oe(i,y,!1);if(s)try{const O=new URL(s).searchParams.get("error");O?O=="access_denied"?(f.value=!0,a.value=y):O=="invalid_request"?(t.value=!0,v.value=1):O=="server_error"&&(t.value=!0,v.value=2):W(s,{external:!0})}catch(w){console.error(w),h&&g("added")}};return Ae(()=>{const y=document.createElement("script");y.async=!0,y.src="https://telegram.org/js/telegram-widget.js?22",L.value.appendChild(y)}),(y,h)=>(k(),x(Q,null,[Te(n(M,null,{default:l(()=>[n(q,{class:"text-center"},{default:l(()=>[B("div",{ref_key:"telegram",ref:L},null,512),n(fe,{"append-icon":y.appendIcon,credential:y.credential,"show-username":y.showUsername,source:"telegram",class:"d-flex justify-start w-100",onClick:E},null,8,["append-icon","credential","show-username"])]),_:1})]),_:1},512),[[Le,c(r)]]),n(re,{modelValue:c(t),"onUpdate:modelValue":h[0]||(h[0]=s=>ne(t)?t.value=s:null),"show-save-action":!1,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Error Attempting Telegram Login","hide-extension":!0,"remove-button-spacer":!0,"close-action-label":"Close",onClose:h[1]||(h[1]=s=>t.value=!1)},{default:l(()=>[c(v)===1?(k(),x("p",ea,N(c(A).messageCreateTelegramError1),1)):D("",!0),c(v)===2?(k(),x("p",aa,N(c(A).messageCreateTelegramError2),1)):D("",!0)]),_:1},8,["modelValue"]),n(re,{modelValue:c(f),"onUpdate:modelValue":h[2]||(h[2]=s=>ne(f)?f.value=s:null),"show-save-action":!0,"show-reset-action":!1,"show-close-action":!0,"show-delete-action":!1,title:"Create new account","hide-extension":!0,"save-button-label":"Create Account",onSave:_,onClose:h[3]||(h[3]=s=>g("cancel"))},{default:l(()=>[B("p",ta,N(c(A).messageCreateTelegramAccount1),1),B("p",sa,N(c(A).messageCreateTelegramAccount2),1),B("p",na,N(c(A).messageCreateTelegramAccount3),1)]),_:1},8,["modelValue"])],64))}}),ra=J({__name:"LoginButton",props:{appendIcon:{type:[String,Array,Function,Object],default:""},credential:{},params:{default:()=>({variant:$.COMBINED})},showUsername:{type:Boolean,default:!1},source:{default:"internal"},url:{default:""}},setup(e){return(m,g)=>m.source=="telegram"?(k(),I(la,{key:0})):(k(),I(fe,{key:1,"append-icon":m.appendIcon,credential:m.credential,"show-username":m.showUsername,source:m.source,class:"d-flex justify-start w-100"},null,8,["append-icon","credential","show-username","source"]))}}),ya=X(ra,[["__scopeId","data-v-f907d1cc"]]),ha=async e=>{const m=z();try{const g=await $fetch(`${m.public.issuerUri}/connect/auth/urls?baseRedirect=${e}`,{method:"get",parseResponse:r=>r}),b=JSON.parse(g);return new Map(Object.entries(b.URLs))}catch(g){throw g}};export{fe as A,$ as E,ya as L,wa as _,ha as u};
